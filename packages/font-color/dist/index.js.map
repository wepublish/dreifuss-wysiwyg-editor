{"version":3,"file":"index.js","sources":["../src/defaults.ts","../src/getFontColorDeserialize.ts","../src/createFontColorPlugin.ts","../src/transforms/upsertColorAtSelection.ts"],"sourcesContent":["import {PlatePluginOptions} from '@udecode/plate-core'\n\nexport const ELEMENT_FONT_COLOR = 'color'\n\nexport const DEFAULTS_FONT_COLOR: Partial<PlatePluginOptions> = {\n  getNodeProps: ({element}) => ({color: element?.color})\n}\n","import {getNodeDeserializer} from '@udecode/plate-common'\nimport {Deserialize, getPlatePluginOptions} from '@udecode/plate-core'\nimport {ELEMENT_FONT_COLOR} from './defaults'\n\nexport const getFontColorLeafDeserialize = (): Deserialize => editor => {\n  const options = getPlatePluginOptions(editor, ELEMENT_FONT_COLOR)\n\n  return {\n    leaf: getNodeDeserializer({\n      type: options.type,\n      getNode: el => ({\n        type: options.type,\n        color: el.getAttribute('color')\n      }),\n      rules: [{nodeNames: 'span'}],\n      ...options.deserialize\n    })\n  }\n}\n","import {\n  getRenderElement,\n  getRenderLeaf,\n  getPlatePluginTypes,\n  PlatePlugin\n} from '@udecode/plate-core'\nimport {ELEMENT_FONT_COLOR} from './defaults'\nimport {getFontColorLeafDeserialize} from './getFontColorDeserialize'\n\n/**\n * Enables support for font color.\n */\nexport const createFontColorPlugin = (): PlatePlugin => ({\n  pluginKeys: ELEMENT_FONT_COLOR,\n  renderElement: getRenderElement(ELEMENT_FONT_COLOR),\n  deserialize: getFontColorLeafDeserialize(),\n  inlineTypes: getPlatePluginTypes(ELEMENT_FONT_COLOR),\n  renderLeaf: getRenderLeaf(ELEMENT_FONT_COLOR)\n})\n","import {TEditor} from '@udecode/plate-core'\nimport {setNodes, isCollapsed} from '@udecode/plate-common'\nimport {Editor, Transforms} from 'slate'\n\nexport function upsertFontColor(editor: TEditor, color: string) {\n  if (!editor) {\n    console.error('error in @dreifuss-wysiwyg-editor/fontcolor')\n    return\n  }\n\n  if (color) {\n    if (!editor.selection) return\n\n    if (isCollapsed(editor?.selection)) {\n      const linkLeaf = Editor.leaf(editor, editor.selection)\n      const [, inlinePath] = linkLeaf\n      Transforms.select(editor, inlinePath)\n    }\n\n    setNodes(\n      editor,\n      {\n        color\n      },\n      {\n        match: () => true,\n        split: true\n      }\n    )\n  }\n}\n"],"names":["ELEMENT_FONT_COLOR","DEFAULTS_FONT_COLOR","getNodeProps","element","color","getFontColorLeafDeserialize","editor","options","getPlatePluginOptions","leaf","getNodeDeserializer","type","getNode","el","getAttribute","rules","nodeNames","deserialize","createFontColorPlugin","pluginKeys","renderElement","getRenderElement","inlineTypes","getPlatePluginTypes","renderLeaf","getRenderLeaf","upsertFontColor","console","error","selection","isCollapsed","linkLeaf","Editor","inlinePath","Transforms","select","setNodes","match","split"],"mappings":";;;;;;;;MAEaA,kBAAkB,GAAG;MAErBC,mBAAgD,GAAG;AAC9DC,EAAAA,YAAY,EAAE,CAAC;AAACC,IAAAA;AAAD,GAAD,MAAgB;AAACC,IAAAA,KAAK,EAAED,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEC;AAAjB,GAAhB;AADgD;;MCAnDC,2BAA2B,GAAG,MAAmBC,MAAM,IAAI;AACtE,QAAMC,OAAO,GAAGC,+BAAqB,CAACF,MAAD,EAASN,kBAAT,CAArC;AAEA,SAAO;AACLS,IAAAA,IAAI,EAAEC,+BAAmB,CAAC;AACxBC,MAAAA,IAAI,EAAEJ,OAAO,CAACI,IADU;AAExBC,MAAAA,OAAO,EAAEC,EAAE,KAAK;AACdF,QAAAA,IAAI,EAAEJ,OAAO,CAACI,IADA;AAEdP,QAAAA,KAAK,EAAES,EAAE,CAACC,YAAH,CAAgB,OAAhB;AAFO,OAAL,CAFa;AAMxBC,MAAAA,KAAK,EAAE,CAAC;AAACC,QAAAA,SAAS,EAAE;AAAZ,OAAD,CANiB;AAOxB,SAAGT,OAAO,CAACU;AAPa,KAAD;AADpB,GAAP;AAWD;;ACTD;AACA;AACA;;MACaC,qBAAqB,GAAG,OAAoB;AACvDC,EAAAA,UAAU,EAAEnB,kBAD2C;AAEvDoB,EAAAA,aAAa,EAAEC,0BAAgB,CAACrB,kBAAD,CAFwB;AAGvDiB,EAAAA,WAAW,EAAEZ,2BAA2B,EAHe;AAIvDiB,EAAAA,WAAW,EAAEC,6BAAmB,CAACvB,kBAAD,CAJuB;AAKvDwB,EAAAA,UAAU,EAAEC,uBAAa,CAACzB,kBAAD;AAL8B,CAApB;;ACR9B,SAAS0B,eAAT,CAAyBpB,MAAzB,EAA0CF,KAA1C,EAAyD;AAC9D,MAAI,CAACE,MAAL,EAAa;AACXqB,IAAAA,OAAO,CAACC,KAAR,CAAc,6CAAd;AACA;AACD;;AAED,MAAIxB,KAAJ,EAAW;AACT,QAAI,CAACE,MAAM,CAACuB,SAAZ,EAAuB;;AAEvB,QAAIC,uBAAW,CAACxB,MAAD,aAACA,MAAD,uBAACA,MAAM,CAAEuB,SAAT,CAAf,EAAoC;AAClC,YAAME,QAAQ,GAAGC,YAAM,CAACvB,IAAP,CAAYH,MAAZ,EAAoBA,MAAM,CAACuB,SAA3B,CAAjB;AACA,YAAM,GAAGI,UAAH,IAAiBF,QAAvB;AACAG,MAAAA,gBAAU,CAACC,MAAX,CAAkB7B,MAAlB,EAA0B2B,UAA1B;AACD;;AAEDG,IAAAA,oBAAQ,CACN9B,MADM,EAEN;AACEF,MAAAA;AADF,KAFM,EAKN;AACEiC,MAAAA,KAAK,EAAE,MAAM,IADf;AAEEC,MAAAA,KAAK,EAAE;AAFT,KALM,CAAR;AAUD;AACF;;;;;;;;"}