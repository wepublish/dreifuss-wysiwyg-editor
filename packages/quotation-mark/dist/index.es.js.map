{"version":3,"file":"index.es.js","sources":["../src/defaults.ts","../src/transforms/upsertMarkAtSelection.ts","../src/createLinkPlugin.ts"],"sourcesContent":["export const ELEMENT_QUOTATION_MARK = 'q'\n","import {isCollapsed} from '@udecode/plate-common'\nimport {BaseEditor, BaseRange, Editor, Transforms} from 'slate'\n\nexport function insertQuotationMarks(\n  editor: BaseEditor,\n  selection: BaseRange | null,\n  selectedQuotationMarks: string\n) {\n  if (!selection) return\n\n  // Selected nodes\n  const nodes = Array.from(\n    Editor.nodes(editor, {\n      at: selection\n    })\n  )\n\n  const tuple = nodes[0]\n\n  if (tuple) {\n    Transforms.setSelection(editor, {\n      anchor: selection.anchor,\n      focus: selection.focus\n    })\n\n    if (isCollapsed(selection)) {\n      switch (selectedQuotationMarks) {\n        case '«»': {\n          Transforms.insertText(editor, '»', {\n            at: selection.anchor\n          })\n          Transforms.insertText(editor, '«', {\n            at: selection.focus\n          })\n          break\n        }\n        case '‹›': {\n          Transforms.insertText(editor, '›', {\n            at: selection.anchor\n          })\n          Transforms.insertText(editor, '‹', {\n            at: selection.focus\n          })\n          break\n        }\n        case '\"\"': {\n          Transforms.insertText(editor, '\"', {\n            at: selection.anchor\n          })\n          Transforms.insertText(editor, '\"', {\n            at: selection.focus\n          })\n          break\n        }\n        case '’’': {\n          Transforms.insertText(editor, '’', {\n            at: selection.anchor\n          })\n          Transforms.insertText(editor, '’', {\n            at: selection.focus\n          })\n          break\n        }\n      }\n    } else {\n      /**\n       * Anchor and focus in slate works exactly like DOM anchor and focus points\n       * Also, Selection can start from focus instead of anchor (end to start).\n       */\n      const isStartingFromAnchor = selection.anchor.offset > selection.focus.offset\n      const startingPoint = isStartingFromAnchor ? selection.anchor : selection.focus\n      const endingPoint = isStartingFromAnchor ? selection.focus : selection.anchor\n\n      switch (selectedQuotationMarks) {\n        case '«»': {\n          Transforms.insertText(editor, '»', {\n            at: startingPoint\n          })\n          Transforms.insertText(editor, '«', {\n            at: endingPoint\n          })\n          break\n        }\n        case '‹›': {\n          Transforms.insertText(editor, '›', {\n            at: startingPoint\n          })\n          Transforms.insertText(editor, '‹', {\n            at: endingPoint\n          })\n          break\n        }\n        case '\"\"': {\n          Transforms.insertText(editor, '\"', {\n            at: startingPoint\n          })\n          Transforms.insertText(editor, '\"', {\n            at: endingPoint\n          })\n          break\n        }\n        case '’’': {\n          Transforms.insertText(editor, '’', {\n            at: startingPoint\n          })\n          Transforms.insertText(editor, '’', {\n            at: endingPoint\n          })\n          break\n        }\n      }\n    }\n  } else {\n    Transforms.insertText(editor, selectedQuotationMarks)\n    Transforms.select(editor, {\n      anchor: selection.anchor,\n      focus: selection.focus\n    })\n  }\n}\n","import {getRenderElement, getPlatePluginTypes, PlatePlugin} from '@udecode/plate-core'\nimport {ELEMENT_QUOTATION_MARK} from './defaults'\n\nexport const createQuotationMarksPlugin = (): PlatePlugin => ({\n  pluginKeys: ELEMENT_QUOTATION_MARK,\n  renderElement: getRenderElement(ELEMENT_QUOTATION_MARK),\n  inlineTypes: getPlatePluginTypes(ELEMENT_QUOTATION_MARK)\n})\n"],"names":["ELEMENT_QUOTATION_MARK","insertQuotationMarks","editor","selection","selectedQuotationMarks","nodes","Array","from","Editor","at","tuple","Transforms","setSelection","anchor","focus","isCollapsed","insertText","isStartingFromAnchor","offset","startingPoint","endingPoint","select","createQuotationMarksPlugin","pluginKeys","renderElement","getRenderElement","inlineTypes","getPlatePluginTypes"],"mappings":"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"}